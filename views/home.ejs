<link rel="stylesheet" href="/css/home.css">
<script src="https://kit.fontawesome.com/0c13de2b67.js" crossorigin="anonymous"></script>
<script async defer src="/JS/post-comment.js"></script>
<h1>Welcome to Codial</h1>
<%if(locals.user){%>
    <form action="/posts/create" method="POST">
        <textarea id="post-feed" name="content" cols="40" rows="5" placeholder="Add Post..." required></textarea>
        <input class="btn-blue" type="submit" value="Add Post">

    </form>
    <%}%>

        <div>

            <%for(post of posts) { %>

                <div class="post-container">

                    <div class="post-name">
                        <i class="fas fa-user-circle small-margin"></i>
                        <class="small-margin">
                            <%=post.user.name%>
                    </div>
                    <div class="post-time medium-margin">
                        <small ><i class="far fa-clock"></i>
                            <%=(post.createdAt).toLocaleTimeString('it-IT')%>
                        </small>
                    </div>
                    <div class="post-content medium-margin">
                        <%=post.content%>

                    </div>

                    <div id="post-comment">
                        <form action="/comment/create-comment" method="POST">
                            <input type="text" name="content" placeholder="Add comment..." required>
                            <input type="hidden" name="post" value="<%=post._id%>">
                            <input class="btn-blue" type="submit" value="Add Comment">
                        </form>
                    </div>
                    <div id="comments"> 
                        <h3>Comments</h3>
                    </div>
                    <div id="comment-container">
                        <%for(comment of post.comments){%>
                            <div class="comment-name">

                                <i class="fas fa-user-circle small-margin"></i>
                                <class="small-margin">
                                    <%=comment.user.name%>
                            </div>
                            

                            <div class="post-time medium-margin">
                                <small ><i class="far fa-clock"></i>
                                    <%=(comment.createdAt).toLocaleTimeString('it-IT')%>
                                </small>
                            </div>
                            <div class="comment-content">
                                <%=comment.content%>
                            </div>
                            
                               


                                <%}%>
                    </div>
                </div>



                <%}%>

        </div>